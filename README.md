# üèóÔ∏è GMPI - Sistema de Gesti√≥n de Mantenimiento Preventivo de Infraestructuras

## üìã Descripci√≥n del Proyecto

GMPI es una aplicaci√≥n web completa para la gesti√≥n de mantenimiento preventivo de infraestructuras educativas (universidades, colegios, escuelas, institutos). Incluye un frontend moderno y un backend robusto con base de datos.

## üöÄ Funcionalidades Principales

### ‚úÖ Gesti√≥n de Instituciones

- ‚úÖ Crear, editar, eliminar y visualizar instituciones
- ‚úÖ Clasificaci√≥n por tipo (universidad, colegio, escuela, instituto)
- ‚úÖ Informaci√≥n detallada: ubicaci√≥n, contacto, capacidades
- ‚úÖ Estad√≠sticas de infraestructura

### ‚úÖ Gesti√≥n de Infraestructuras

- ‚úÖ Gesti√≥n de facultades y edificios por instituci√≥n
- ‚úÖ Control de aulas, laboratorios y espacios
- ‚úÖ Estado y condiciones de las instalaciones

### ‚úÖ Sistema de Mantenimiento

- ‚úÖ Programaci√≥n de mantenimientos preventivos y correctivos
- ‚úÖ Estados: programado, en progreso, completado, vencido
- ‚úÖ Prioridades: baja, media, alta, cr√≠tica
- ‚úÖ Control de costos y proveedores
- ‚úÖ Historial completo de mantenimientos

### ‚úÖ B√∫squeda y Filtros Avanzados

- ‚úÖ B√∫squeda inteligente con autocompletado
- ‚úÖ Filtros por tipo, ubicaci√≥n, estado
- ‚úÖ B√∫squeda en tiempo real

### ‚úÖ Reportes y Estad√≠sticas

- ‚úÖ Dashboard con m√©tricas principales
- ‚úÖ Reportes de mantenimientos pr√≥ximos y vencidos
- ‚úÖ An√°lisis de costos por per√≠odo
- ‚úÖ Estad√≠sticas por instituci√≥n

### ‚úÖ Sistema de Archivos

- ‚úÖ Subida de documentos y fotos
- ‚úÖ Gesti√≥n de archivos adjuntos
- ‚úÖ Soporte para m√∫ltiples formatos

### ‚úÖ Autenticaci√≥n y Seguridad

- ‚úÖ Sistema de usuarios con roles
- ‚úÖ Autenticaci√≥n JWT
- ‚úÖ Protecci√≥n de rutas
- ‚úÖ Rate limiting

## üõ†Ô∏è Tecnolog√≠as Utilizadas

### Frontend

- **HTML5, CSS3, JavaScript ES6+**
- **Responsive Design** con CSS Grid/Flexbox
- **Modales interactivos** con animaciones
- **API Client** para comunicaci√≥n con backend
- **LocalStorage** para persistencia offline

### Backend

- **Node.js** con Express.js
- **SQLite** para desarrollo / **PostgreSQL** para producci√≥n
- **JWT** para autenticaci√≥n
- **bcrypt** para hash de contrase√±as
- **Multer** para subida de archivos
- **Express-validator** para validaciones
- **Helmet** y **CORS** para seguridad

### Base de Datos

- **Estructura relacional** con foreign keys
- **√çndices optimizados** para b√∫squedas r√°pidas
- **Soft deletes** para mantener historial
- **Triggers autom√°ticos** para fechas

## üìÅ Estructura del Proyecto

```
INTERFAZ-Infres/
‚îú‚îÄ‚îÄ FRONTEND/                    # Interfaz de usuario
‚îÇ   ‚îú‚îÄ‚îÄ html/                    # P√°ginas HTML
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.html          # P√°gina principal/portal
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ infraestructuras.html # Gesti√≥n principal
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dashboard.html      # Panel de control
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ edit-institution.html # Edici√≥n de instituciones
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ components/         # Componentes reutilizables
‚îÇ   ‚îú‚îÄ‚îÄ css/                     # Hojas de estilo
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ styles.css          # Estilos principales
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ infraestructuras.css # Estilos espec√≠ficos
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ dark-theme.css      # Tema oscuro
‚îÇ   ‚îî‚îÄ‚îÄ javascript/              # Scripts del cliente
‚îÇ       ‚îú‚îÄ‚îÄ api-client.js       # Cliente API principal
‚îÇ       ‚îú‚îÄ‚îÄ universal-header.js  # Header universal
‚îÇ       ‚îî‚îÄ‚îÄ navigation.js       # Navegaci√≥n
‚îú‚îÄ‚îÄ BACKEND/                     # Servidor y API
‚îÇ   ‚îú‚îÄ‚îÄ server.js               # Servidor principal
‚îÇ   ‚îú‚îÄ‚îÄ config/                 # Configuraciones
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ database.js         # Configuraci√≥n DB
‚îÇ   ‚îú‚îÄ‚îÄ routes/                 # Rutas de la API
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ institutions.js     # CRUD instituciones
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ infrastructure.js   # CRUD infraestructuras
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ maintenance.js      # CRUD mantenimientos
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ reports.js          # Reportes y estad√≠sticas
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.js             # Autenticaci√≥n
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ upload.js           # Subida de archivos
‚îÇ   ‚îú‚îÄ‚îÄ database/               # Base de datos SQLite
‚îÇ   ‚îú‚îÄ‚îÄ uploads/                # Archivos subidos
‚îÇ   ‚îî‚îÄ‚îÄ package.json            # Dependencias
‚îú‚îÄ‚îÄ scripts/                     # Scripts de despliegue
‚îÇ   ‚îú‚îÄ‚îÄ deploy.sh               # Despliegue Linux/Mac
‚îÇ   ‚îî‚îÄ‚îÄ deploy.bat              # Despliegue Windows
‚îú‚îÄ‚îÄ vercel.json                 # Configuraci√≥n Vercel
‚îî‚îÄ‚îÄ README.md                   # Esta documentaci√≥n
```

## üåê Opciones de Despliegue

### 1. üéØ **RECOMENDADO: Vercel (Gratis)**

#### Ventajas:

- ‚úÖ **Gratis** para proyectos personales
- ‚úÖ **Deploy autom√°tico** desde Git
- ‚úÖ **CDN global** para m√°ximo rendimiento
- ‚úÖ **HTTPS autom√°tico** con certificado SSL
- ‚úÖ **Dominio personalizable**
- ‚úÖ **Serverless** - escala autom√°ticamente

#### Pasos para Vercel:

1. **Preparar el repositorio:**

```bash
# Instalar Vercel CLI
npm install -g vercel

# En la carpeta del proyecto
cd INTERFAZ-Infres
```

2. **Configurar variables de entorno en Vercel:**

```
NODE_ENV=production
JWT_SECRET=tu_jwt_secret_super_seguro_aqui
ALLOWED_ORIGINS=https://tu-dominio.vercel.app
```

3. **Desplegar:**

```bash
vercel --prod
```

#### Configuraci√≥n adicional:

- El archivo `vercel.json` ya est√° configurado
- La base de datos SQLite funcionar√° en desarrollo
- Para producci√≥n, considera migrar a **PostgreSQL** (Vercel Postgres)

---

### 2. üöÇ **Railway (Recomendado para full-stack)**

#### Ventajas:

- ‚úÖ **$5/mes** con base de datos PostgreSQL incluida
- ‚úÖ **Deploy desde Git** autom√°tico
- ‚úÖ **Base de datos persistente**
- ‚úÖ **Logs en tiempo real**
- ‚úÖ **Variables de entorno** f√°ciles

#### Pasos para Railway:

1. **Crear cuenta en Railway.app**
2. **Conectar repositorio de GitHub**
3. **Agregar PostgreSQL addon**
4. **Configurar variables:**

```
NODE_ENV=production
DATABASE_URL=postgresql://user:pass@host:port/db
JWT_SECRET=tu_jwt_secret_super_seguro_aqui
```

---

### 3. üì¶ **Render (Alternativa gratuita)**

#### Ventajas:

- ‚úÖ **Plan gratuito** disponible
- ‚úÖ **PostgreSQL gratis** (limitado)
- ‚úÖ **SSL autom√°tico**
- ‚úÖ **Deploy desde Git**

#### Limitaciones del plan gratuito:

- ‚ùå Se "duerme" despu√©s de inactividad
- ‚ùå Arranque lento en primera carga

---

### 4. üíª **Servidor VPS (DigitalOcean, Vultr, etc.)**

#### Para proyectos de producci√≥n serios:

- ‚úÖ **Control total** del servidor
- ‚úÖ **Performance predecible**
- ‚úÖ **Base de datos dedicada**
- ‚ùå Requiere conocimientos de **DevOps**
- ‚ùå **$5-20/mes** aproximadamente

---

## üîß Configuraci√≥n de Base de Datos

### SQLite (Desarrollo)

```env
DB_TYPE=sqlite
DB_PATH=./database/gmpi.db
```

### PostgreSQL (Producci√≥n)

```env
DB_TYPE=postgresql
DATABASE_URL=postgresql://user:password@host:port/database
```

### Migraci√≥n autom√°tica:

El sistema detecta autom√°ticamente el tipo de base de datos y:

1. ‚úÖ Crea las tablas necesarias
2. ‚úÖ Inserta datos iniciales
3. ‚úÖ Configura √≠ndices para optimizaci√≥n

---

## üöÄ Instrucciones de Despliegue Paso a Paso

### Opci√≥n A: Despliegue R√°pido en Vercel

1. **Subir c√≥digo a GitHub:**

```bash
git init
git add .
git commit -m "Initial GMPI deployment"
git branch -M main
git remote add origin https://github.com/tu-usuario/gmpi-sistema.git
git push -u origin main
```

2. **Conectar con Vercel:**

- Ve a [vercel.com](https://vercel.com)
- Conecta tu repositorio de GitHub
- ‚úÖ Vercel detectar√° autom√°ticamente la configuraci√≥n

3. **Configurar variables de entorno en Vercel:**

```
NODE_ENV=production
JWT_SECRET=tu_jwt_secret_cambiar_por_uno_seguro
ALLOWED_ORIGINS=https://tu-proyecto.vercel.app
```

4. **¬°Listo!** Tu aplicaci√≥n estar√° disponible en `https://tu-proyecto.vercel.app`

### Opci√≥n B: Script Automatizado

```bash
# Windows
cd INTERFAZ-Infres
scripts/deploy.bat

# Linux/Mac
cd INTERFAZ-Infres
chmod +x scripts/deploy.sh
./scripts/deploy.sh
```

---

## üîí Configuraci√≥n de Seguridad

### Variables de Entorno Cr√≠ticas:

```env
# JWT Secret (CAMBIAR OBLIGATORIAMENTE)
JWT_SECRET=tu_jwt_secret_super_seguro_de_al_menos_32_caracteres

# CORS - Dominios permitidos
ALLOWED_ORIGINS=https://tu-dominio.com,https://tu-dominio.vercel.app

# Rate Limiting
RATE_LIMIT_WINDOW=15  # minutos
RATE_LIMIT_MAX=100    # peticiones por ventana

# Encriptaci√≥n
BCRYPT_ROUNDS=12
```

### Recomendaciones de Seguridad:

- ‚úÖ **Cambiar JWT_SECRET** en producci√≥n
- ‚úÖ **Configurar CORS** solo para tu dominio
- ‚úÖ **HTTPS obligatorio** en producci√≥n
- ‚úÖ **Rate limiting** habilitado
- ‚úÖ **Validation** en todos los endpoints
- ‚úÖ **Sanitizaci√≥n** de inputs

---

## üìä Monitoreo y Mantenimiento

### Logs y Debugging:

```bash
# Ver logs en desarrollo
npm run dev

# Ver logs en Vercel
vercel logs

# Ver logs en Railway
railway logs
```

### Backup de Base de Datos:

```bash
# SQLite
cp database/gmpi.db backup/gmpi-$(date +%Y%m%d).db

# PostgreSQL
pg_dump $DATABASE_URL > backup/gmpi-$(date +%Y%m%d).sql
```

### Actualizaciones:

```bash
# Actualizar dependencias
npm update

# Deploy nueva versi√≥n
git add .
git commit -m "Update: descripci√≥n del cambio"
git push
```

---

## üõ°Ô∏è Resoluci√≥n de Problemas Comunes

### Error: "API not responding"

**Soluci√≥n:** Verificar que las variables de entorno est√©n configuradas correctamente.

### Error: "Database connection failed"

**Soluci√≥n:** Verificar `DATABASE_URL` o ruta de SQLite.

### Error: "CORS blocked"

**Soluci√≥n:** Agregar tu dominio a `ALLOWED_ORIGINS`.

### Error: "Token expired"

**Soluci√≥n:** El sistema redirige autom√°ticamente al login.

### Performance lento:

- ‚úÖ Verificar √≠ndices de base de datos
- ‚úÖ Optimizar consultas pesadas
- ‚úÖ Usar CDN para archivos est√°ticos

---

## üìû Soporte y Mantenimiento

### Estructura de Soporte:

1. **Documentaci√≥n** - Este README
2. **Logs del sistema** - Consultar en plataforma de hosting
3. **Base de datos** - Queries de diagn√≥stico incluidas
4. **API Testing** - Endpoints documentados

### Escalabilidad:

- **SQLite**: Hasta 1,000 usuarios concurrentes
- **PostgreSQL**: Sin l√≠mites pr√°cticos
- **Archivos**: Considerar CDN para +100MB

---

## üéØ Pr√≥ximas Mejoras Sugeridas

### Funcionalidades Futuras:

- üìß **Notificaciones por email** para mantenimientos vencidos
- üì± **App m√≥vil** con React Native
- üîî **Push notifications** del navegador
- üìà **Analytics avanzados** con gr√°ficos
- üóìÔ∏è **Calendario integrado** para programaci√≥n
- üë• **Gesti√≥n de equipos** y permisos granulares
- üîÑ **API p√∫blica** para integraciones
- üåç **Multi-idioma** (ingl√©s, portugu√©s)

### Optimizaciones T√©cnicas:

- ‚ö° **Caching con Redis**
- üîç **B√∫squeda full-text** con Elasticsearch
- üìä **Dashboard en tiempo real** con WebSockets
- üèóÔ∏è **Microservicios** para mayor escalabilidad

---

## ‚úÖ Lista de Verificaci√≥n Pre-Despliegue

- [ ] **C√≥digo subido a Git** con commits descriptivos
- [ ] **Variables de entorno configuradas** en la plataforma
- [ ] **JWT_SECRET cambiado** por uno seguro √∫nico
- [ ] **CORS configurado** para tu dominio espec√≠fico
- [ ] **Base de datos** lista (SQLite para desarrollo, PostgreSQL para producci√≥n)
- [ ] **Archivos de configuraci√≥n** (`vercel.json`, etc.) incluidos
- [ ] **Scripts de deploy** testados
- [ ] **Dominio personalizado** configurado (opcional)
- [ ] **SSL/HTTPS** habilitado autom√°ticamente
- [ ] **Pruebas funcionales** realizadas

---

## üéâ ¬°Listo para Producci√≥n!

Tu sistema GMPI est√° completamente preparado para ser desplegado en producci√≥n con:

- ‚úÖ **Backend robusto** con API REST completa
- ‚úÖ **Base de datos relacional** optimizada
- ‚úÖ **Frontend moderno** y responsive
- ‚úÖ **Seguridad implementada** con mejores pr√°cticas
- ‚úÖ **Escalabilidad** para crecimiento futuro
- ‚úÖ **Documentaci√≥n completa** para mantenimiento

**¬°Despliega con confianza y gestiona infraestructuras como un profesional!** üöÄ
